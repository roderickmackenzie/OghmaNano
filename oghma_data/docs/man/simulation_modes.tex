\chapter{Simulation modes and simulation editors}
\label{sec:simmodes}

OghmaNano uses a modular architecture that enables the core solver to perform a variety of simulation types using \index{plugins}. For example there is a plugin to perform steady state JV simulations, another plugin to perform frequency domain simulations, and another to calculate the Quantum Efficiency. They all leverage the same OghmaNano core solver but run it in a slightly different way with custom inputs and outputs. A list of the plugins and what they do can be found below:

\begin{itemize}
	\vspace{-0.2cm}\item Plugins for various types of experiment
	\begin{itemize}
		\vspace{-0.2cm}\item jv: To calculate steady state JV curves.
		\vspace{-0.2cm}\item suns\_jsc: Simulate suns v.s. Jsc curves.
		\vspace{-0.2cm}\item suns\_voc: Suns v.s. Voc simulations.
		\vspace{-0.2cm}\item eqe: Simulates EQE.
		\vspace{-0.2cm}\item cv: Capacitance voltage simulations.
		\vspace{-0.2cm}\item ce: To simulate charge extraction experiments.
		\vspace{-0.2cm}\item time\_domain: A time domain solver for transient simulations.
		\vspace{-0.2cm}\item fx\_domain: Simulate the frequency domain response of a device, both electrical and optical excitation.
		\vspace{-0.2cm}\item pl\_ss: Calculate the PL spectrum at in steady state.
		\vspace{-0.2cm}\item mode: Used to solve optical modes in 1/2D waveguides.
		\vspace{-0.2cm}\item spm: Simulates scanning probe microscopy in 3D electrical simulations.
		\vspace{-0.2cm}\item equilibrium: Equilibrium electrical simulations.
		\vspace{-0.2cm}\item exciton: Exciton simulations.
		\vspace{-0.2cm}\item mesh\_gen: Generates meshes.
	\end{itemize}
	\vspace{-0.2cm}\item Optical solver plugins
	\begin{itemize}
		\vspace{-0.2cm}\item fdtd: Finite Difference Time Domain (FDTD) optical solver.
		\vspace{-0.2cm}\item optics: Optical transfer matrix solver for 1D structures
		\vspace{-0.2cm}\item light\_full: Optical transfer matrix solver.
		\vspace{-0.2cm}\item light\_qe: Calculates optical profile using the experimental quantum efficiency.
		\vspace{-0.2cm}\item light\_exp: Calculates optical profile assuming exponential propagation of light in 1D structures.
		\vspace{-0.2cm}\item light\_flat: Calculates optical profile assuming flat optical profiles in the structure.
		\vspace{-0.2cm}\item light\_constant: Assumes user given values of generation rate in optical structures.
		\vspace{-0.2cm}\item light\_fromfile: Takes a generation rate from a file.
	\end{itemize}
\end{itemize}

In the simulation editors ribbon (see Figure \ref{fig:simeditors}) you can see icons that represent each plugin, these are the simulation editors. By clicking on an icon in this ribbon you will be able to edit how the plugin performs the various simulations.  For example in the JV simulation editor one can change the start/stop voltages of a voltage sweep.  The JV editor can be seen in Figure \ref{fig:jv_low}. Within each simulation editor the user can define multiple so called \emph{experiments}. This can be seen in below in Figure \ref{fig:jv_low} and Figure \ref{fig:jv_high}, where two JV scans have been defined within the JV editor, one called \emph{JV curve - low voltage} and another called \emph{JV curve - high voltage}. One has a start voltage of 0.02V and stop voltage of 1.0V, while the other has a start voltage of 1.0V and a stop voltage of 10V.  This feature is most useful in more complex experiments such as in time domain experiments where one may want to simulate multiple different voltage/light ramps/pulses for one device. There is no limit to how many \emph{experiments} can be defined for each plugin.
\\
\begin{figure}
\centering
\includegraphics[width=\linewidth,height=0.2\linewidth]{./images/sim_editors/ribbon_sim_editors.png}
\caption{Simulation editors use this toolbar to edit the various simulation conditions your device will experience.}
\label{fig:simeditors}
\end{figure}

\begin{minipage}{0.5\textwidth}
	\centering
	\includegraphics[width=\linewidth,height=0.8\linewidth]{./images/sim_editors/jv_high_voltage.png}
	\captionof{figure}{An experiment set up in the JV window for high voltage simulations.}
	\label{fig:jv_low}
\end{minipage}
\hspace{4pt}
\begin{minipage}[]{0.5\linewidth}
	\centering
	\includegraphics[width=\linewidth,height=0.8\linewidth]{./images/sim_editors/jv_low_voltage.png}
	\captionof{figure}{An experiment set up in the JV window for low voltage simulations.}
	\label{fig:jv_high}
\end{minipage}

Once an \emph{experiment} has been defined an icon representing it will appear in the simulation mode ribbon shown in figure \ref{fig:simmodes}. You can see in the figure an icon for \emph{JV curve low voltage} and \emph{JV curve high voltage} that were defined in Figure \ref{fig:jv_low} and \ref{fig:jv_high}. You can see in Figure \ref{fig:simmodes} that \emph{JV curve low voltage} is depressed. This means that when the simulation is run this simulation mode will be executed. If you select another simulation mode, then when the play button (or F9) is pressed that simulation mode will be run. Only one simulation mode can be run at a time.


\begin{figure}[H]
\centering
\includegraphics[width=\linewidth,height=0.2\linewidth]{./images/sim_editors/ribbon_sim_modes.png}
\caption{Selecting a simulation mode, in this case the \emph{JV curve low voltage} has been selected so that when the user presses play that simulation mode will be run.}
\label{fig:simmodes}
\end{figure}

\input{simulation_modes_jv.tex}
\input{simulation_modes_time_domain.tex}
\input{simulation_modes_fx_domain.tex}
\input{simulation_modes_suns_voc.tex}
\input{simulation_modes_suns_jsc.tex}
\input{simulation_modes_qe.tex}
\input{simulation_modes_spm.tex}
\input{simulation_modes_equilibrium.tex}
\input{simulation_modes_pl.tex}
\input{simulation_modes_ce.tex}
\input{simulation_modes_cv.tex}
\input{simulation_modes_hardware.tex}

